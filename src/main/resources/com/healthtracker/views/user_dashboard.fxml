<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx"
           xmlns:fx="http://javafx.com/fxml"
           fx:controller="com.healthtracker.ui.UserDashboardController"
           stylesheets="@styles/style.css, @styles/sidebar.css, @styles/dashboard.css, @styles/tables.css">

    <!-- Sidebar po lewej stronie -->
    <left>
        <fx:include source="components/sidebar.fxml"/>
    </left>

    <!-- GÅ‚Ã³wna zawartoÅ›Ä‡ -->
    <center>
        <VBox styleClass="main-content">
            
            <!-- NagÅ‚Ã³wek -->
            <VBox styleClass="dashboard-header">
                <HBox alignment="CENTER_LEFT" styleClass="header-bar">
                    <Label text="Panel uÅ¼ytkownika" styleClass="dashboard-title"/>
                    <Region HBox.hgrow="ALWAYS"/>
                </HBox>
            </VBox>

            <!-- ZakÅ‚adki bez moÅ¼liwoÅ›ci zamykania -->
            <TabPane fx:id="mainTabPane" styleClass="main-tabpane" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
                
                <!-- ZakÅ‚adka Pomiary -->
                <Tab text="ðŸ“Š Pomiary" fx:id="measurementsTab">
                    <VBox spacing="15" styleClass="tab-content" VBox.vgrow="ALWAYS">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>
                        <Label text="Twoje pomiary zdrowotne" styleClass="section-title"/>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT" styleClass="action-bar">
                            <Button text="âž• Dodaj pomiar" onAction="#onAddMeasurement" styleClass="primary-btn"/>
                            <Separator orientation="VERTICAL"/>
                            <Button text="ðŸ“¤ Eksportuj CSV" onAction="#onExportMeasurementsClicked" styleClass="export-btn"/>
                            <Button text="ðŸ“¥ Importuj CSV" onAction="#onImportMeasurementsClicked" styleClass="import-btn"/>
                        </HBox>

                        <TableView fx:id="measurementTable" styleClass="data-table" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="timestampColumn" text="Data i czas" prefWidth="180" minWidth="160"/>
                                <TableColumn fx:id="bpColumn" text="CiÅ›nienie" prefWidth="100" minWidth="80"/>
                                <TableColumn fx:id="hrColumn" text="TÄ™tno" prefWidth="80" minWidth="60"/>
                                <TableColumn fx:id="weightColumn" text="Waga" prefWidth="80" minWidth="60"/>
                                <TableColumn fx:id="summaryColumn" text="Podsumowanie" prefWidth="260" minWidth="200"/>
                            </columns>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                        </TableView>
                    </VBox>
                </Tab>

                <!-- ZakÅ‚adka AktywnoÅ›ci -->
                <Tab text="ðŸƒ AktywnoÅ›ci" fx:id="activitiesTab">
                    <VBox spacing="15" styleClass="tab-content" VBox.vgrow="ALWAYS">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>
                        <Label text="Twoje aktywnoÅ›ci fizyczne" styleClass="section-title"/>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT" styleClass="action-bar">
                            <Button text="âž• Dodaj aktywnoÅ›Ä‡" onAction="#onAddActivity" styleClass="primary-btn"/>
                            <Separator orientation="VERTICAL"/>
                            <Button text="ðŸ“¤ Eksportuj CSV" onAction="#onExportActivitiesClicked" styleClass="export-btn"/>
                            <Button text="ðŸ“¥ Importuj CSV" onAction="#onImportActivitiesClicked" styleClass="import-btn"/>
                        </HBox>

                        <TableView fx:id="activitiesTable" styleClass="data-table" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="activityTypeColumn" text="Typ aktywnoÅ›ci" prefWidth="140" minWidth="120"/>
                                <TableColumn fx:id="durationColumn" text="Czas (min)" prefWidth="90" minWidth="70"/>
                                <TableColumn fx:id="distanceColumn" text="Dystans" prefWidth="90" minWidth="70"/>
                                <TableColumn fx:id="activityCaloriesColumn" text="Kalorie" prefWidth="80" minWidth="60"/>
                                <TableColumn fx:id="intensityColumn" text="IntensywnoÅ›Ä‡" prefWidth="120" minWidth="100"/>
                                <TableColumn fx:id="speedColumn" text="Åšr. prÄ™dkoÅ›Ä‡" prefWidth="100" minWidth="80"/>
                                <TableColumn fx:id="activityDateColumn" text="Data i czas" prefWidth="140" minWidth="120"/>
                            </columns>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                        </TableView>
                    </VBox>
                </Tab>

                <!-- ZakÅ‚adka PosiÅ‚ki -->
                <Tab text="ðŸ½ï¸ PosiÅ‚ki" fx:id="mealsTab">
                    <VBox spacing="15" styleClass="tab-content" VBox.vgrow="ALWAYS">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>
                        <Label text="Twoje posiÅ‚ki" styleClass="section-title"/>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT" styleClass="action-bar">
                            <Button text="âž• Dodaj posiÅ‚ek" onAction="#onAddMeal" styleClass="primary-btn"/>
                            <Separator orientation="VERTICAL"/>
                            <Button text="ðŸ“¤ Eksportuj CSV" onAction="#onExportMealsClicked" styleClass="export-btn"/>
                            <Button text="ðŸ“¥ Importuj CSV" onAction="#onImportMealsClicked" styleClass="import-btn"/>
                        </HBox>

                        <TableView fx:id="mealsTable" styleClass="data-table" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="mealTypeColumn" text="Typ posiÅ‚ku" prefWidth="120" minWidth="100"/>
                                <TableColumn fx:id="mealCaloriesColumn" text="Kalorie" prefWidth="80" minWidth="60"/>
                                <TableColumn fx:id="descriptionColumn" text="Opis posiÅ‚ku" prefWidth="320" minWidth="250"/>
                                <TableColumn fx:id="mealDateColumn" text="Data i czas" prefWidth="140" minWidth="120"/>
                            </columns>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                        </TableView>
                    </VBox>
                </Tab>

                <!-- ZakÅ‚adka Cele -->
                <Tab text="ðŸŽ¯ Cele" fx:id="goalsTab">
                    <VBox spacing="15" styleClass="tab-content" VBox.vgrow="ALWAYS">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>
                        <Label text="Twoje cele zdrowotne" styleClass="section-title"/>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT" styleClass="action-bar">
                            <Button text="âž• Dodaj cel" onAction="#onAddGoal" styleClass="primary-btn"/>
                        </HBox>

                        <TableView fx:id="goalsTable" styleClass="data-table" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="goalTypeColumn" text="Typ celu" prefWidth="150" minWidth="120"/>
                                <TableColumn fx:id="goalTargetColumn" text="WartoÅ›Ä‡ docelowa" prefWidth="140" minWidth="100"/>
                                <TableColumn fx:id="goalCurrentColumn" text="Obecny stan" prefWidth="120" minWidth="90"/>
                                <TableColumn fx:id="goalProgressColumn" text="PostÄ™p" prefWidth="100" minWidth="80"/>
                                <TableColumn fx:id="goalDueColumn" text="Termin" prefWidth="120" minWidth="100"/>
                                <TableColumn fx:id="goalStatusColumn" text="Status" prefWidth="120" minWidth="100"/>
                            </columns>
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                        </TableView>
                    </VBox>
                </Tab>

            </TabPane>
        </VBox>
    </center>

</BorderPane>
