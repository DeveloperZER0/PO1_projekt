<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" 
           xmlns:fx="http://javafx.com/fxml/1" 
           fx:controller="com.healthtracker.ui.ProfileController"
           stylesheets="@styles/style.css, @styles/sidebar.css, @styles/dashboard.css, @styles/tables.css">

    <!-- Sidebar po lewej stronie -->
    <left>
        <fx:include source="components/sidebar.fxml"/>
    </left>

    <!-- Główna zawartość -->
    <center>
        <VBox styleClass="main-content">
            
            <!-- Nagłówek -->
            <VBox styleClass="dashboard-header">
                <HBox alignment="CENTER_LEFT" styleClass="header-bar">
                    <Label text="Profil użytkownika" styleClass="dashboard-title"/>
                    <Region HBox.hgrow="ALWAYS"/>
                </HBox>
            </VBox>

            <!-- Zawartość profilu w ScrollPane -->
            <ScrollPane VBox.vgrow="ALWAYS" fitToWidth="true" styleClass="content-scroll">
                <content>
                    <VBox spacing="20.0">
                        <padding>
                            <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                        </padding>
                        
                        <!-- Informacje o koncie -->
                        <VBox spacing="10.0">
                            <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="Informacje o koncie" />
                            <GridPane hgap="10.0" vgap="5.0">
                                <columnConstraints>
                                    <ColumnConstraints minWidth="120.0" />
                                    <ColumnConstraints />
                                </columnConstraints>
                                <Label text="Nazwa użytkownika:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                <Label fx:id="usernameLabel" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                                <Label text="Email:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                <Label fx:id="emailLabel" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                                <Label text="Rola:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                <Label fx:id="roleLabel" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                                <Label text="Data utworzenia:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                                <Label fx:id="createdAtLabel" GridPane.columnIndex="1" GridPane.rowIndex="3" />
                            </GridPane>
                            <Label fx:id="statisticsLabel" style="-fx-font-size: 14px; -fx-text-fill: #666;" />
                        </VBox>
                        
                        <Separator />
                        
                        <!-- Zmiana hasła -->
                        <VBox fx:id="changePasswordSection" spacing="10.0">
                            <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="Zmiana hasła" />
                            <GridPane hgap="10.0" vgap="10.0">
                                <columnConstraints>
                                    <ColumnConstraints minWidth="150.0" />
                                    <ColumnConstraints minWidth="200.0" />
                                </columnConstraints>
                                <Label text="Aktualne hasło:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                <PasswordField fx:id="currentPasswordField" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                                <Label text="Nowe hasło:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                <PasswordField fx:id="newPasswordField" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                                <Label text="Potwierdź hasło:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                <PasswordField fx:id="confirmPasswordField" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                            </GridPane>
                            <Button fx:id="changePasswordButton" onAction="#onChangePasswordClicked" text="Zmień hasło" styleClass="primary-btn" />
                        </VBox>
                        
                        <Separator />
                        
                        <!-- Zarządzanie danymi -->
                        <VBox fx:id="dataManagementSection" spacing="10.0">
                            <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="Zarządzanie danymi" />
                            <Label style="-fx-font-size: 12px; -fx-text-fill: #666;" text="UWAGA: Te operacje są nieodwracalne!" />
                            <HBox spacing="10.0">
                                <Button fx:id="clearDataButton" onAction="#onClearDataClicked" style="-fx-background-color: orange; -fx-text-fill: white;" text="Usuń wszystkie dane" />
                                <Button fx:id="deleteAccountButton" onAction="#onDeleteAccountClicked" style="-fx-background-color: red; -fx-text-fill: white;" text="Usuń konto" />
                            </HBox>
                        </VBox>
                        
                        <!-- Sekcja potwierdzenia -->
                        <VBox fx:id="confirmationSection" spacing="10.0" style="-fx-background-color: #f0f0f0; -fx-padding: 15; -fx-border-color: #ccc; -fx-border-width: 1;">
                            <Label fx:id="confirmationLabel" style="-fx-font-weight: bold;" />
                            <HBox alignment="CENTER_LEFT" spacing="10.0">
                                <Label text="Hasło:" />
                                <PasswordField fx:id="confirmationPasswordField" />
                            </HBox>
                            <HBox spacing="10.0">
                                <Button fx:id="confirmActionButton" onAction="#onConfirmActionClicked" style="-fx-background-color: red; -fx-text-fill: white;" text="Potwierdź" />
                                <Button fx:id="cancelActionButton" onAction="#onCancelActionClicked" text="Anuluj" />
                            </HBox>
                        </VBox>
                        
                    </VBox>
                </content>
            </ScrollPane>
            
        </VBox>
    </center>
</BorderPane>
